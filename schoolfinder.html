<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz@1,6..96&family=Outfit:wght@600&family=Raleway:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="schoolfinder.css">
    <title>ABMconnectED | ABM School Finder</title>
</head>


<body>
<div class="navbar">
        <nav>
            <h2 class="logo"><img src="img/logo.png" alt="" srcset=""></h2>
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="home.html#about-page">Overview</a></li>
                <li><a href="curriculum.html">Curriculum Guide</a></li>
                <li><a href="faq.html">FAQs</a></li>
                <li><a href="scholar.html">Scholarship Grants</a></li>
                <div class="dropdown">
                    <button class="bar"><i style="font-size:28px;color:black;border-radius: 8px; width: 60px;height: 45px;padding-top: 9px; text-align: center;" class="fa">&#xf0c9;</i></button>
                    <div class="dropdown-content">
                        <a href="roadmap.html">Career Pathways</a>
                        <a href="assessment.html">Self Assessment</a>
                        <a href="testimonial.html#student">Student Showcase</a>
                        <a href="testimonial.html#testimony">Forums & Testimonial</a>
                        <a href="testimonial.html#joincommunity">Join the Community</a>
                        <a href="testimonial.html#oppo">Events & Opportunities</a>
                        <a href="financial.html">Financial Literacy</a>
                        <a href="schoolfinder.html">ABM School Finder</a>
                        <a href="aboutweb.html">About the website</a>
                    </div>
                </div>
            </ul>
        </nav>
    </div>
  
    <div class="abmStrandOffer">
     <h1>ABM Strand Offering Schools</h1>
  </div>
  <div class="lugar">
    <p id="rehiyon">Region:</p>
    <p id="probinsya">Province:</p>
    <p id="munisipal">Municipality:</p>
   </div>
  
  <div class="dropdownAddress">
  
        <select id="region" name="reg" onchange="fetchData()">
          <option value="">Select Region</option>
          <option value="ARRMM">ARRMM</option>
          <option value="CAR">CAR</option>
          <option value="CARAGA">CARAGA</option>
          <option value="NCR">NCR</option>
          <option value="NIR">NIR</option>
          <option value="Region 1">Region 1</option>
          <option value="Region 2">Region 2</option>
          <option value="Region 3">Region 3</option>
          <option value="Region 4">Region 4</option>
          <option value="Region 5">Region 5</option>
          <option value="Region 6">Region 6</option>
          <option value="Region 7">Region 7</option>
          <option value="Region 8">Region 8</option>
          <option value="Region 9">Region 9</option>
          <option value="Region 10">Region 10</option>
          <option value="Region 11">Region 11</option>
          <option value="Region 12">Region 12</option>
          <!-- more region options... -->
        </select>


        
  <select id="province" name="prov" onchange="fetchMunicipalities()">
    <option value="">Select Province</option>
    <!-- province options will be dynamically added here -->
  </select>


  
  <select id="municipality" name="muni">
    <option value="">Select Municipality</option>
    <!-- municipality options will be dynamically added here -->
  </select>
  <input type="Submit" value="Search" id= "submit-btn" onclick="searchSchool()">
</div>
  
  <div class="SchoolInfo" id="school-info">
    <table id="school-table">
      <thead>
        <tr>
          <th>School ID</th>
          <th>School Name</th>
        </tr>
      </thead>
      <tbody id="school-table-body">
        
        <!-- School data will be dynamically added here -->
      </tbody>
    </table>
  </div>
     
 
         </div>
       </div>



       <footer>
        <div class="head">
            <h1>We're you able to find what you're looking for?</h1>
            <div class="head-btn">
                <!-- Modal after cliking -->
                <button onclick="response()">YES</button>
                <button onclick="noresponse()">NO</button>
                <button onclick="noresponse()">Yes, But I had a hard time</button>
            </div>
        </div>
        <div class="main">
            <div class="footer-grid">
                <div class="footer-grid-item" id="first">
                    <img src="img/logo.png">
                    <p>Bridging paths<br>Igniting potential<br>Fostering bonds</p>
                </div>
                <div class="footer-grid-item" id="second">
                    <h1>Contact Us</h1>
                    <p><i class="fa fa-phone"></i>09543132</p>
                    <p><i class="fa fa-envelope"></i>abmconnected@gmail.com</p>
                    <p><i class="fa fa-map-marker"></i>San Alberto</p>
                </div>
                <div class="footer-grid-item" id="third">
                    <h1>References</h1>
                    <a href="https://www.deped.gov.ph">https://www.deped.gov.ph</a>
                    <a href="https://www.scribd.com">https://www.scribd.com</a>
                    <a href="https://www.academia.edu.ph">https://www.academia.edu.ph</a>
                    <a href="https://www.ciit.edu.ph/what-is-abm-strand/">https://www.ciit.edu.ph</a>
                    <a href="https://www.coursera.org">https://www.coursera.org</a>
                    <a href="https://www.udemy.com">https://www.udemy.com</a>
                </div>
                <div class="footer-grid-item" id="fourth">
                        <form action="insert_email.php" method="get">
                                <h1>NewsLetter</h1>
                                <p>Enter your email to get the latest catch sent to your inbox</p>
                                <div class="sendmail">
                                    <input type="text" placeholder="Email Address"  name="email"  id="email" required>
                                    <button><i class="fa fa-arrow-right" onclick="return validateEmail();"></i></button>
                                </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-foot">
            <p>Â© 2023-All rights Reserved by ABMconnectED</p>
            <div class="foot-icon">
                <a href="https://www.facebook.com/profile.php?id=100095476780060"><i class="fa fa-facebook-f"></i></a>
                <a href=""><i class="fa fa-instagram"></i></a>
                <a href="https://twitter.com/abmcnntd"><i class="fa fa-twitter"></i></a>
            </div>
        </div>
    </footer>
  
  

  <script>
  function fetchData() {
    var region = document.getElementById("region").value;

    // Make an AJAX request to the server-side script (province.php) to fetch data based on the selected region
    fetch("province.php?region=" + region)
      .then(response => response.json())
      .then(data => {
        var provinceDropdown = document.getElementById("province");
        provinceDropdown.innerHTML = '<option value="">Select Province</option>';
        data.forEach(province => {
          provinceDropdown.innerHTML += `<option value="${province}">${province}</option>`;
        });

       
      })
      .catch(error => {
        console.error("Error fetching data:", error);
      });
  }

  function fetchMunicipalities() {
      var region = document.getElementById("region").value;
      var province = document.getElementById("province").value;

      fetch("municipality.php?region=" + region + "&province=" + province)
        .then(response => response.json())
        .then(data => {
          var municipalityDropdown = document.getElementById("municipality");
          municipalityDropdown.innerHTML = '<option value="">Select Municipality</option>';
          data.forEach(municipality => {
            municipalityDropdown.innerHTML += `<option value="${municipality}">${municipality}</option>`;
          });
        })
        .catch(error => {
          console.error("Error fetching municipalities:", error);
        });
    }

    function searchSchool() {
  var region = document.getElementById("region").value;
  var province = document.getElementById("province").value;
  var municipality = document.getElementById("municipality").value;
  if (!region || !province || !municipality) {
    return;
  }

  // Make an AJAX request to the server-side script (search.php) to fetch school data based on the selected dropdown values
  fetch("search.php?region=" + region + "&province=" + province + "&municipality=" + municipality)
    .then(response => response.json())
    .then(data => {
      // Display the school information on the webpage

      var schoolInfoDiv = document.getElementById("school-table-body");
      schoolInfoDiv.innerHTML = ""; // Clear any previous content

      // Iterate through each school and create a row with two cells (ID and Name)
      data.forEach(school => {
        var row = document.createElement("tr");
        var schoolIdCell = document.createElement("td");
        var schoolNameCell = document.createElement("td");

        schoolIdCell.textContent = school.school_id;
        schoolNameCell.textContent = school.school_name;

        row.appendChild(schoolIdCell);
        row.appendChild(schoolNameCell);

        schoolInfoDiv.appendChild(row);
      });

    })
    .catch(error => {
      console.error("Error fetching school data:", error);
    });
}


function response(){
            alert("Thank you for your response!");
        }
        function noresponse(){
            alert("Thank you for your response! We will try to improve the website further.");
        }
</script>
</body>
</html>
